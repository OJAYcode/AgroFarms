<ul class="navbar-nav">
@{
    var userId = Context.Session.GetString("UserId");
    var userType = Context.Session.GetString("UserType");
    var userName = Context.Session.GetString("UserName");
}

@if (!string.IsNullOrEmpty(userId))
{
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-user me-1"></i>@userName (@userType)
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            @if (userType == "Farmer")
            {
                <li><a class="dropdown-item" asp-controller="Farmer" asp-action="Dashboard"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a></li>
                <li><a class="dropdown-item" asp-controller="Farmer" asp-action="Products"><i class="fas fa-box me-2"></i>My Products</a></li>
                <li><a class="dropdown-item" asp-controller="Farmer" asp-action="Orders"><i class="fas fa-clipboard-list me-2"></i>Orders</a></li>
                <li><a class="dropdown-item" asp-controller="Farmer" asp-action="CreateProduct"><i class="fas fa-plus me-2"></i>Add Product</a></li>
            }
            else if (userType == "Buyer")
            {
                <li><a class="dropdown-item" asp-controller="Buyer" asp-action="Dashboard"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a></li>
                <li><a class="dropdown-item" asp-controller="Buyer" asp-action="Orders"><i class="fas fa-clipboard-list me-2"></i>My Orders</a></li>
                <li><a class="dropdown-item" asp-controller="Buyer" asp-action="Cart"><i class="fas fa-shopping-cart me-2"></i>Cart</a></li>
            }
            <li><hr class="dropdown-divider"></li>
            <li>
                <form method="post" asp-controller="Account" asp-action="Logout" class="d-inline">
                    <button type="submit" class="dropdown-item"><i class="fas fa-sign-out-alt me-2"></i>Logout</button>
                </form>
            </li>
        </ul>
    </li>
}
else
{
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle text-dark" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-user me-1"></i>Account
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" asp-controller="Account" asp-action="Login"><i class="fas fa-sign-in-alt me-2"></i>Login</a></li>
            <li><hr class="dropdown-divider"></li>            <li><a class="dropdown-item" asp-controller="Account" asp-action="RegisterFarmer"><i class="fas fa-seedling me-2"></i>Register as Farmer</a></li>
            <li><a class="dropdown-item" asp-controller="Account" asp-action="RegisterBuyer"><i class="fas fa-shopping-bag me-2"></i>Register as Buyer</a></li>
        </ul>
    </li>
}
</ul>
